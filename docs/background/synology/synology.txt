Admin på synolog:
användarnamn:
REDACTED_USERNAME

Lösenord:
REDACTED_PASSWORD

SSH:
Port 22

Servernamn:
Mittemellan

DS2188: REDACTED_SERVER_IP
DS218play: REDACTED_DS218_IP

DS218play: http://REDACTED_DS218_IP:5000/?_dc=1762716327519#/signin



# Remote Development Setup – Synology NAS

## Översikt  
Detta dokument beskriver hur du ställer in och ansluter till din Synology NAS-enhet för fjärrutveckling via Visual Studio Code (Remote-SSH) och kodassistenter (t.ex. Gemini Code Assist, Claude, Copilot) med SSH-nyckelautentisering.

---

### Inställningar  
- **Värdalias:** `Mittemellan`  
- **IP-adress:** `REDACTED_SERVER_IP`  
- **SSH-användare:** `REDACTED_USERNAME`  
- **SSH-port:** `22`  
- **Privat nyckelfil (klient):** `~/.ssh/id_rsa`  
- **Hemkatalog på NAS:** `/var/services/homes/REDACTED_USERNAME`  
- **Nyckelpublik fil:** `~/.ssh/id_rsa.pub`

---

### Steg för uppsättning  

#### 1. Aktivering av hemkatalog på NAS  
- I DSM: Gå till *Kontrollpanelen → Användare & grupper → Avancerat* → Aktivera “Användarhem” (Homes-läge) för vald volym.  
- Mappen skapas automatiskt (t.ex. `/volume1/homes/REDACTED_USERNAME` och symbolisk länk till `/var/services/homes/...`).

#### 2. Generera SSH-nyckel på klienten (Windows/Git Bash)  
```bash
ssh-keygen -t rsa -b 2048 -C "REDACTED_USERNAME@REDACTED_SERVER_IP"
Acceptera standardplatsen och – om önskas – lämna lösenfras tom för enklare lokal åtkomst.

3. Kopiera publik nyckel till NAS
Logga in via SSH med lösenord en gång:

bash
Kopiera kod
ssh REDACTED_USERNAME@REDACTED_SERVER_IP -p 22
På NAS:

bash
Kopiera kod
cd /var/services/homes/REDACTED_USERNAME
mkdir -p .ssh
chmod 700 .ssh
vi .ssh/authorized_keys   # Klistra in innehållet från id_rsa.pub
chmod 600 .ssh/authorized_keys
4. Justera katalog- och filbehörigheter
bash
Kopiera kod
chmod 755 /var/services/homes/REDACTED_USERNAME
chmod 700 /var/services/homes/REDACTED_USERNAME/.ssh
chmod 600 /var/services/homes/REDACTED_USERNAME/.ssh/authorized_keys
5. Konfigurera SSH-server på NAS
Öppna /etc/ssh/sshd_config.

Kontrollera att följande rader är avkommenterade:

bash
Kopiera kod
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys
Spara och ladda om SSH-tjänsten eller genom DSM: Inaktivera → Tillämpa → Aktivera → Tillämpa.

6. Konfigurera VS Code Remote-SSH
Installera extensionen Remote – SSH.

Öppna ~/.ssh/config och lägg till:

nginx
Kopiera kod
Host Mittemellan
    HostName REDACTED_SERVER_IP
    User REDACTED_USERNAME
    IdentityFile ~/.ssh/id_rsa
    Port 22
Anslut via: Remote-SSH → Connect to Host… → Mittemellan.

Kontrollera att du inte blir ombedd om lösenord.

Felsökning
Om du får fel “Permission denied (publickey)”:

Kontrollera att rättigheterna är korrekta (700/600).

Kontrollera att publik nyckel verkligen finns och är korrekt insatt.

Kör anslutning med verbose-läge:

bash
Kopiera kod
ssh -i ~/.ssh/id_rsa REDACTED_USERNAME@REDACTED_SERVER_IP -p 22 -vvv
Dubbelkolla att hemkatalogen verkligen finns och är den du använder.

Säkerställ att användaren är medlem i Administrators-gruppen på NAS.

Dokumentation
Spara detta dokument i rotmappen för ditt workspace, t.ex. README-remote-setup.md, så att inställningarna och processen finns dokumenterade för framtida referens och för andra användare i teamet.


Tailscale
Tailscale är installerad på Windows och Synology. Använder github-kontot retea-se Identity Provider

Display: retea-se.github
Tailnet ID: REDACTED_TAILNET_ID

Client ID:
REDACTED_CLIENT_ID

Client secret:
REDACTED_TAILSCALE_CLIENT_SECRET


Auth key:
REDACTED_TAILSCALE_AUTH_KEY

API Access token:
REDACTED_TAILSCALE_API_TOKEN




Datum: 2025-11-09
Author: Marcus